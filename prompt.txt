# 1) Quick summary & priorities

**Goal:** Build a personalized multi-city travel planner that supports user accounts, trip creation, stop/activity management, cost estimation and visualization, and sharing. Core judge criteria: *real data model (relational DB), clean responsive UI, itinerary builder, budget breakdown, shareable/public view.*

**Top priority (MVP):**

1. Auth (signup/login)
2. Create trip + My Trips list
3. Itinerary Builder (add/reorder stops & activities)
4. Budget estimate & breakdown (simple calculation)
5. Itinerary view (day-wise)
6. City search (basic)
7. Public shareable itinerary (read-only)

---

# 2) High-level user flows (3 most important)

## A. New user → Plan a trip

1. Signup → email verification (optional)
2. Dashboard → “Plan New Trip”
3. Create trip (name, start/end, description, cover photo)
4. Add stops (city, arrival/departure dates)
5. For each stop: add activities (time, cost, category)
6. View itinerary (day-wise), view budget breakdown
7. Share → generate public URL

## B. Edit existing trip

* From My Trips, select Edit → add/remove/reorder stops and activities → saved automatically or on Save.

## C. Browse / Discover

* Search cities → view basic meta (country, cost index, popularity) → Add to Trip

---

# 3) Full feature list (Must vs Nice-to-have)

## MUST (MVP)

* Auth: signup/login, session (JWT)
* Dashboard: recent trips + Plan New Trip
* Trip CRUD
* Add/Remove/Reorder stops (multi-city)
* Add/Remove activities with time & cost
* Day-wise itinerary view
* Budget estimation: transport + stay + activities + meals (simple formula)
* Trip list (cards with summary)
* Public shareable link (read-only)
* Relational DB persistence (Postgres/MySQL)
* Responsive UI (mobile + desktop)
* Validations & basic error handling

## NICE (post-MVP / stretch)

* Drag-and-drop itinerary editing
* Maps integration (Leaflet/Mapbox) & city suggestions via API
* Image uploads to S3
* Social sharing + Copy Trip (duplication)
* Collaboration (multi-user editing)
* Admin analytics dashboard
* Offline/local first fallback
* i18n & accessibility audit

---

# 4) Database design (Postgres / MySQL) — ER summary & SQL examples

Entities: `users`, `trips`, `stops`, `activities`, `cities`, `trip_shares`, `activity_types`, `budgets`, `images`.

### Logical relationships

* user (1) — (N) trips
* trip (1) — (N) stops
* stop (1) — (N) activities
* trip (1) — (N) trip_shares (public tokens)

### Example Postgres schema (simplified)

```sql
-- users
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  name VARCHAR(100),
  created_at TIMESTAMPTZ DEFAULT now()
);

-- trips
CREATE TABLE trips (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  start_date DATE,
  end_date DATE,
  cover_image VARCHAR(512),
  is_public BOOLEAN DEFAULT FALSE,
  public_slug VARCHAR(128), -- random/readable token if made public
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- stops (a stop is a city visit inside a trip)
CREATE TABLE stops (
  id SERIAL PRIMARY KEY,
  trip_id INTEGER REFERENCES trips(id) ON DELETE CASCADE,
  city_id INTEGER, -- optional FK to cities table
  city_name VARCHAR(255) NOT NULL,
  arrival_date DATE,
  departure_date DATE,
  position INTEGER DEFAULT 0, -- ordering
  notes TEXT
);

-- activities
CREATE TABLE activities (
  id SERIAL PRIMARY KEY,
  stop_id INTEGER REFERENCES stops(id) ON DELETE CASCADE,
  title VARCHAR(255) NOT NULL,
  start_time TIME,  -- or timestamp if using day+time
  duration_minutes INTEGER,
  cost NUMERIC(10,2) DEFAULT 0,
  category VARCHAR(100),
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT now()
);

-- optional cities table for search metadata
CREATE TABLE cities (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  country VARCHAR(255),
  cost_index NUMERIC(4,2),
  popularity_score INTEGER,
  lat NUMERIC(9,6),
  lon NUMERIC(9,6)
);

-- trip_shares
CREATE TABLE trip_shares (
  id SERIAL PRIMARY KEY,
  trip_id INTEGER REFERENCES trips(id) ON DELETE CASCADE,
  slug VARCHAR(128) UNIQUE,
  expires_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now()
);
```

Indexes: add `INDEX` on `trips.user_id`, `stops.trip_id`, `activities.stop_id`, and `cities.name` (text search).

---

# 5) Backend architecture & API (Node.js)

**Suggested stack:** Node.js + Express (or Fastify) + Prisma ORM (works well for Postgres/MySQL) + JWT auth + bcrypt + multer (uploads) + Docker + Postgres/MySQL.

**Why Prisma:** easy migrations, type-safe, quick to set up with Postgres/MySQL.

---

## API contract (key endpoints — include validations & sample responses)

### Auth

* `POST /api/auth/register`

  * body: `{ name, email, password }`
  * returns: `{ user: {id, name, email}, token }`
* `POST /api/auth/login`

  * body: `{ email, password }`
  * returns: `{ user, token }`
* `POST /api/auth/refresh` (optional)
* `POST /api/auth/logout` (optional)

### Trips

* `GET /api/trips` — list user's trips (filter by upcoming/past)
* `POST /api/trips` — create trip

  * body: `{ title, description, start_date, end_date, cover_image? }`
  * returns 201 `{ trip }`
* `GET /api/trips/:tripId` — trip details with stops & activities
* `PUT /api/trips/:tripId` — update trip
* `DELETE /api/trips/:tripId` — delete trip

### Stops

* `POST /api/trips/:tripId/stops` — add stop

  * body: `{ city_name, city_id?, arrival_date, departure_date, position? }`
* `PUT /api/stops/:stopId` — update stop
* `DELETE /api/stops/:stopId`

### Activities

* `POST /api/stops/:stopId/activities` — add activity

  * body: `{ title, start_time, duration_minutes, cost, category }`
* `PUT /api/activities/:activityId`
* `DELETE /api/activities/:activityId`
* `POST /api/trips/:tripId/reorder-stops` — reorder stops (body: `{ order: [stopId,...] }`)

### Budget & Analytics

* `GET /api/trips/:tripId/budget` — returns cost breakdown by category

  * response:

    ```json
    {
      "total": 1234.56,
      "byCategory": {
        "transport": 200.00,
        "stay": 600.00,
        "activities": 300.00,
        "meals": 134.56
      },
      "avgPerDay": 205.76,
      "overBudgetDays": [ "2026-01-05", ... ]
    }
    ```

### City & Activity search

* `GET /api/search/cities?q=...&limit=20`
* `GET /api/search/activities?q=...&cityId=...`

### Sharing / Public view

* `POST /api/trips/:tripId/share` → create a public slug (returns slug and public URL)
* `GET /api/public/trips/:slug` → return read-only trip (no auth)

### Admin (optional)

* `GET /api/admin/stats` — aggregated metrics

**Notes:** Use proper auth middleware, validation with Joi or Zod, and paginate lists.

---

# 6) Frontend architecture (React + Vite) — prompt & component breakdown

Below is a ready-to-paste **frontend prompt** for a React + Vite developer. Copy and hand off.

---

## — FRONTEND PROMPT (copy/paste to dev)

**Tech stack:** React + Vite, TypeScript, Tailwind CSS, React Router v6, TanStack Query (react-query) for data, React Hook Form for forms, date-fns, recharts for charts, react-beautiful-dnd for reorder, OAuth optional later.

**Goals:** Implement responsive, accessible UI for GlobeTrotter with pages and components as defined below. Use the API endpoints described in the backend API contract.

**Pages / Routes**

* `/` → Landing / Dashboard (if logged out show CTA; if logged in show recent trips)
* `/auth/login` → Login
* `/auth/register` → Register
* `/trips` → My Trips (list)
* `/trips/new` → Create Trip form
* `/trips/:tripId` → Trip overview + Itinerary view
* `/trips/:tripId/edit` → Itinerary builder (edit stops & activities)
* `/public/:slug` → Public read-only trip view
* `/profile` → User settings/profile

**Top-level components**

* `AppShell` — header, nav, mobile menu
* `AuthForm` — login/register (React Hook Form)
* `TripCard` — summary card used in My Trips
* `TripEditor` — page containing `StopList` and `ActivityEditor`
* `StopList` — sortable list of stops (uses react-beautiful-dnd)
* `StopItem` — single stop UI (city, dates, add activity)
* `ActivityList` — list of activities under a stop
* `ActivityFormModal` — modal to add/edit activity
* `ItineraryView` — day-wise UI + calendar toggle
* `BudgetPanel` — cost breakdown + charts (recharts)
* `CitySearch` — search component that calls `/api/search/cities`
* `SharePanel` — create public link, copy link
* `PublicTripView` — read-only itinerary layout

**State & Data**

* Use React Query for server state. Cache trips and trip details; react-query invalidation on mutation.
* Local UI state (form open/closed) via component state or Zustand for cross-component state.

**UX notes**

* Autosave on minor edits but show saving indicator.
* Provide undo for delete actions (snackbar).
* Mobile-first responsive design, breakpoints: `sm: 640px`, `md: 768px`, `lg: 1024px`.
* Accessibility: keyboard navigation for lists; aria labels on modals.

**Styling**

* Use Tailwind CSS with a neutral primary color palette. Provide a dark/light mode toggle (optional).
* Use consistent spacing & 2xl rounded corners for cards (per earlier dev brief).

**Deliverables**

* PR with all pages and components wired to the API (stubs acceptable for first iteration)
* README with `npm` scripts, env variable docs, and one-click run instructions (Vite dev server)
* Unit tests for core components using React Testing Library (optional, minimal)

---

# 7) Backend prompt (copy/paste to backend dev)

**Tech stack:** Node.js (v18+), Express (or Fastify), TypeScript, Prisma ORM (Postgres/MySQL), JWT auth, bcrypt, Zod/Joi for validation, Docker + docker-compose for local dev.

**Tasks**

1. Initialize project, Prisma schema for DB tables (users, trips, stops, activities, cities, trip_shares). Provide migrations.
2. Implement auth routes: register/login → return JWT (access + refresh optional).
3. Implement Trips endpoints (CRUD) with full nested responses (trip includes stops and activities).
4. Implement stops & activities endpoints, reorder endpoint for stops.
5. Implement budget calculation endpoint `/api/trips/:id/budget`. Budget calculation can be deterministic:

   * activities total = sum(activity.cost)
   * transport estimate = basic constant per city or user input (initial: 0)
   * stay estimate = average nightly rate * number of nights (simple default)
   * meals = per-day fixed default * days
6. Implement search endpoints using `cities` table (seed a small set for demo).
7. Implement share endpoint: creates `slug` and toggles trip to `is_public`.
8. Implement file upload route (cover_image) — use local storage in hackathon or S3 stub.
9. Provide simple admin stats endpoint (optional).

**Security**

* Protect user resources by checking `trip.user_id === auth.user.id`.
* Hash passwords with bcrypt.
* Rate-limit public endpoints lightly.

**Dev experience**

* Provide Postman/Insomnia collection or OpenAPI spec (minimal).
* Provide docker-compose file with Postgres/MySQL and backend service.
* Provide seed script to insert example cities and demo user/trip.

---

# 8) Example frontend ↔ backend data shape (JSON)

**Create trip request**

```json
POST /api/trips
{
  "title": "10-day Italy Adventure",
  "description": "Rome -> Florence -> Venice",
  "start_date": "2026-05-01",
  "end_date": "2026-05-10"
}
```

**Trip detail response (GET /api/trips/:id)**

```json
{
  "id": 12,
  "title": "10-day Italy Adventure",
  "description": "...",
  "start_date": "2026-05-01",
  "end_date": "2026-05-10",
  "stops": [
    {
      "id": 101,
      "position": 0,
      "city_name": "Rome",
      "arrival_date": "2026-05-01",
      "departure_date": "2026-05-04",
      "activities": [
        { "id": 1001, "title": "Colosseum tour", "cost": 30.00, "start_time": "10:00", "duration_minutes": 90 }
      ]
    }
  ],
  "is_public": false
}
```

---

# 9) Dev environment & quick setup suggestions

* Use `docker-compose.yml` with `db` (postgres:15 or mysql:8) and `backend` service.
* Frontend: `npm create vite@latest globe-trotter --template react-ts`
* Backend: `npm init -y`, `ts-node-dev`, Prisma init (`prisma init`), add `DATABASE_URL`
* Provide `.env.example`

---

# 10) 8-hour hackathon execution plan (practical breakdown)

**Hour 0.0–0.5** — Project setup (repo, vite, backend init, prisma, docker)
**Hour 0.5–2.0** — Auth + DB models + migrations + seed data (basic user + cities)
**Hour 2.0–4.5** — Trip CRUD + trip detail endpoint + stops & activities endpoints
**Hour 4.5–6.0** — Frontend pages: Auth, Dashboard, Create Trip, My Trips, Trip detail (read-only)
**Hour 6.0–7.0** — Itinerary Builder UI (add stop, add activity), simple reorder (position field)
**Hour 7.0–7.5** — Budget panel & charts (recharts)
**Hour 7.5–8.0** — Public sharing, polish, deploy demo to Vercel (frontend) & render/heroku (backend) or run locally and record demo video

---

# 11) Acceptance criteria / demo checklist (what judges expect)

* User can register and login.
* User can create a trip with start/end date.
* User can add at least two stops and activities per stop.
* Itinerary view displays day-wise plan and computes total cost.
* Trip can be made public and accessed via a public URL.
* UI is responsive and visually consistent.
* Data persists in a relational DB (show DB tables or use Prisma studio).

(If all above are done, you’re in good shape.)

---

# 12) Extras & helpful libraries

* React-query (TanStack Query) — data fetching & cache
* Prisma — DB ORM
* Tailwind CSS — styling
* React Hook Form + Zod — forms + validation
* date-fns — date manipulation
* Recharts — budget charts
* react-beautiful-dnd — drag & drop reorder
* Leaflet or Mapbox GL — maps (optional)
* Sentry (optional) for error logging

---

# 13) Final: Copy-ready **frontend** & **backend** prompts (two short blocks you can paste)

### Frontend prompt (paste-ready)

```
Build the GlobeTrotter frontend using React + Vite + TypeScript + Tailwind.
Implement routes: /, /auth/login, /auth/register, /trips, /trips/new, /trips/:tripId, /trips/:tripId/edit, /public/:slug.
Use React Router v6 and TanStack Query to call the provided Node API.
Core components: AppShell, Dashboard, TripCard, TripEditor (StopList + ActivityList), ItineraryView, BudgetPanel.
Use React Hook Form for forms and react-beautiful-dnd for reordering stops. Use recharts for budget charts.
Focus MVP: Auth, Create Trip, add stops/activities, day-wise itinerary, budget breakdown, public share URL.
Follow responsive design (mobile-first), accessibility basics, and autosave UX.
```

### Backend prompt (paste-ready)

```
Build GlobeTrotter backend using Node.js + TypeScript + Express (or Fastify) + Prisma.
Schema: users, trips, stops, activities, cities, trip_shares. Provide migrations and seed script.
Implement auth (register/login → JWT), trip CRUD, stops & activities endpoints, reorder stops, budget endpoint,
search endpoints for cities, and share (create public slug + read-only public route).
Add validation (Zod/Joi), password hashing (bcrypt), and Docker + docker-compose for local Postgres/MySQL.
Return nested trip detail including stops and activities. Provide a Postman collection or minimal OpenAPI spec.
```